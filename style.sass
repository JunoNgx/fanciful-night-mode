$trans-time: 1s
$trans-mode: ease-in-out

@mixin circle($size)
    width: $size
    height: $size
    border-radius: 50%
    
body
    background-color: white
    margin: 0
    display: flex
    flex-direction: column
    place-items: center
    min-width: 300px
    min-height: 100vh

footer
    text-align: center
    margin-bottom: 1rem
    font-family: monospace

.main
    position: relative
    cursor: pointer
    margin: auto auto
    width: 350px
    height: 140px
    border-radius: 75px
    border: solid black 5px
    overflow: hidden
    background-color: DeepSkyBlue
    transition: background-color $trans-time $trans-mode
    
    &.is-dark
        // background-color: MidnightBlue
        background-color: #111

.switch
    position: absolute
    margin: 10px
    width: 120px
    height: 120px
    border-radius: 60px
    overflow: hidden

    background-color: gold
    transition: margin-left $trans-time $trans-mode,  background-color $trans-time $trans-mode

    &.is-dark
        margin-left: 220px
        background-color: silver

.moon
    position: relative
    transform: translateY(150px)
    transition: transform $trans-time $trans-mode

    &.is-dark
        transform: translateY(0)

    &__lasercannon
        position: absolute
        background-color: DimGray
        width: 40px
        height: 20px
        border-radius: 50%
        transform: translate(12px, 20px) rotate(-45deg)

    &__lasercannon-core
        position: absolute
        background-color: silver
        width: 10px
        height: 5px
        border-radius: 50%
        transform: translate(27px, 27px) rotate(-45deg)
    
    &__equator
        position: absolute
        background-color: DimGray
        width: 250px
        height: 5px
        transform: translateY(60px)

.deathstar-ray
    position: absolute
    background-color: lime
    width: 100px
    height: 1px
    border: solid 2px lime
    border-radius: 50%
    transform: translate(153px, 13px) rotate(25deg)
    opacity: 0
    transition: opacity 0.1s ease-in-out 0s

    &.is-dark
        transition: opacity 0.5s ease-in-out 1.5s
        opacity: 1
        animation: 0.1s ease-in-out 0s infinite alternate laser-sizzling

@keyframes laser-sizzling
    0%
        border-width: 2px
    50%
        border-width: 4px
    100%
        border-width: 2px

// This is dumb and terrible
// Should use a container then transform translate the container for more simple rules
.sunlight
    &__layer
        position: absolute
        border-radius: 50%
        background-color: white

        transition: transform $trans-time $trans-mode

        &--bottom
            @include circle(450px)
            transform: translate(-160px, -160px)
            opacity: 0.1

        &--mid
            @include circle(330px)
            transform: translate(-100px, -100px)
            opacity: 0.15

        &--top
            @include circle(220px)
            transform: translate(-40px, -40px)
            opacity: 0.20
            
        .is-dark &
            &--bottom
                transform: translate(60px, -160px)
            &--mid
                transform: translate(125px, -100px)
            &--top
                transform: translate(175px, -40px)

.cloud-cluster
    position: absolute

    &--top
        opacity: 1
        transition: transform $trans-time*0.8 $trans-mode

    &--bottom
        opacity: 0.5
        transition: transform $trans-time*1.1 $trans-mode

    &.is-dark
        transform: translateY(300px)
    
    &__cloud
        position: absolute
        color: white
        background-color: white

        &--bottom
            &-1
                @include circle(250px)
                transform: translate(-5px, 40px)
            &-2
                @include circle(120px)
                transform: translate(140px, 25px)
            &-3
                @include circle(120px)
                transform: translate(210px, 35px)
            &-4
                @include circle(70px)
                transform: translate(270px, 5px)

        &--top
            &-1
                @include circle(170px)
                transform: translate(45px, 100px)
            &-2
                @include circle(80px)
                transform: translate(160px, 100px)
            &-3
                @include circle(150px)
                transform: translate(220px, 60px)
            &-4
                @include circle(100px)
                transform: translate(300px, 0px)

@mixin star($size)
    width: $size
    height: $size

@keyframes twinkle
        0%
            transform: scale(1)
        70%
            transform: scale(1)
        85%
            transform: scale(1.3)
        100%
            transform: scale(1)

.nightsky
    position: absolute

    &__star
        position: absolute
        background-color: white
        width: 30px
        height: 30px
        clip-path: polygon(50% 0, 60% 40%, 100% 50%, 60% 60%, 50% 100%, 40% 60%, 0 50%, 40% 40%)
        top: -200px

        // Animation props
        animation-name: twinkle
        animation-direction: normal
        animation-fill-mode: none
        animation-iteration-count: infinite
        animation-timing-function: cubic-bezier(0.51,-0.46, 0.63, 1.45)
        animation-duration: 3s

        &--1
            left: 100px
            @include star(25px)
            transition: top $trans-mode $trans-time*0.8
            animation-duration: 3.3s

        &--2
            left: 20px
            @include star(13px)
            transition: top $trans-mode $trans-time*1.2
            animation-duration: 5.1s

        &--3
            left: 150px
            @include star(17px)
            transition: top $trans-mode $trans-time*1.1
            animation-duration: 3.9s
        &--4
            left: 120px
            @include star(22px)
            transition: top $trans-mode $trans-time*0.95
            animation-duration: 3.2s
        &--5
            left: 55px
            @include star(12px)
            transition: top $trans-mode $trans-time*1.05
            animation-duration: 4.7s
        &--6
            left: 200px
            @include star(8px)
            transition: top $trans-mode $trans-time*1.15
            animation-duration: 5.6s
        &--7
            left: 40px
            @include star(11px)
            transition: top $trans-mode $trans-time*0.85
            animation-duration: 6.2s

    .is-dark &__star
        &--1
            top: 80px
        &--2
            top: 40px
        &--3
            top: 65px
        &--4
            top: 5px
        &--5
            top: 120px
        &--6
            top: 100px
        &--7
            top: 0px

.bear
    position: absolute
    left: 20px
    top: 170px
    &::before
        content: "üêª"

    &.is-dark
        animation: 5s linear 2s 1 normal bear-float

@keyframes bear-float
    0%
        transform: translate(0, 0), rotation (0)
    100%
        transform: translate(240px, -200px) rotate(1800deg)
